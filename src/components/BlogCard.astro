---
import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';

interface Props {
  title: string;
  description: string;
  pubDate: string | Date;
  domain: string;
  stack: string[];
  slug: string;
  author?: string;
  image?: { src: ImageMetadata; alt: string };
}

const { title, description, pubDate, domain, stack, slug, author, image } = Astro.props;

const formattedDate = new Date(pubDate).toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'short',
  day: 'numeric',
});
---

<a href={`/blog/${slug}`} class="card blog-card">
  {image && <Image src={image.src} alt={image.alt} class="card-image" width={600} height={180} />}
  <div class="card-meta">
    <time datetime={new Date(pubDate).toISOString()}>{formattedDate}</time>

  </div>
  <h3 class="card-title">{title}</h3>
  <p class="card-description">{description}</p>
  <div class="card-footer">
    <div class="tags">
      <span class="tag domain">{domain}</span>
      {stack.slice(0, 2).map(item => (
        <span class="tag stack">{item}</span>
      ))}
    </div>
    <span class="card-link-icon">â†’</span>
  </div>
</a>

<style>
  .card-image {
    width: 100%;
    height: 180px;
    object-fit: cover;
    border-radius: 6px 6px 0 0;
    margin: -1.25rem -1.25rem 0.75rem -1.25rem;
    width: calc(100% + 2.5rem);
    display: block;
  }
</style>
