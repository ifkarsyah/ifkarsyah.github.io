---
interface Props {
  title: string;
  company: string;
  tagline?: string;
  type: 'work' | 'education';
  startDate: string;
  endDate: string | null;
  description: string;
  bullets: string[];
  tags: string[];
}

const { title, company, tagline, type, startDate, endDate, description, bullets, tags } = Astro.props;

function formatDate(dateStr: string) {
  const [year, month] = dateStr.split('-');
  const date = new Date(Number(year), Number(month) - 1);
  return date.toLocaleDateString('en-US', { year: 'numeric', month: 'short' });
}

const start = formatDate(startDate);
const end = endDate ? formatDate(endDate) : 'Present';
---

<div class={`timeline-item type-${type}`}>
  <div class="timeline-dot"></div>
  <div class="timeline-content">
    <div class="timeline-header">
      <div>
        <h3 class="timeline-title">{title}</h3>
        <p class="timeline-company">{company}</p>
        {tagline && <p class="timeline-tagline">{tagline}</p>}
      </div>
      <div style="display: flex; flex-direction: column; align-items: flex-end; gap: 0.4rem;">
<span class="timeline-date">{start} â€“ {end}</span>
      </div>
    </div>
    <p class="timeline-description">{description}</p>
    {bullets.length > 0 && (
      <ul class="timeline-bullets">
        {bullets.map(b => <li>{b}</li>)}
      </ul>
    )}
    {tags.length > 0 && (
      <div class="tags">
        {tags.map(tag => <span class="tag">{tag}</span>)}
      </div>
    )}
  </div>
</div>
